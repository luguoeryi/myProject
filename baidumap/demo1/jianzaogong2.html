<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        body, html {width: 100%;height: 100%;margin:0;font-family:"微软雅黑";}
        #allmap{width:100%;height:500px;}
        p{margin-left:5px; font-size:14px;}
    </style>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=YWdGplhYjUGQ3GtpKNeuTM2S"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js"></script>
    <title>点聚合</title>
</head>
<body>
    <div id="allmap"></div>
    <p>缩放地图，查看点聚合效果</p>
    <script type="text/javascript">
        // 百度地图API功能
        var map = new BMap.Map("allmap");
        map.centerAndZoom(new BMap.Point(116.404, 39.915), 4);
        map.enableScrollWheelZoom();
    
        var MAX = 10;
        var markers = [];
        var pt = null;
        var i = 0;
    
    
    
        var markersA = [];
    
        for (i=0; i < MAX; i++) {
        pt = new BMap.Point(Math.random() * 5 + 75, Math.random() * 10 + 21);
        markersA.push(new BMap.Marker(pt));
        }
        var markersB = [];
    
        for (i=0; i < MAX; i++) {
        pt = new BMap.Point(Math.random() * 5 + 80, Math.random() * 10 + 21);
        markersB.push(new BMap.Marker(pt));
        }
        var markersC = [];
    
        for (i=0; i < MAX; i++) {
        pt = new BMap.Point(Math.random() * 5 + 85, Math.random() * 10 + 21);
        markersC.push(new BMap.Marker(pt));
        }
    
    var markerClustererA = new BMapLib.MarkerClusterer(map, {markers:markersA});
    var markerClustererB = new BMapLib.MarkerClusterer(map, {markers:markersB});
    var markerClustererC = new BMapLib.MarkerClusterer(map, {markers:markersC});
    
    //下面是对照组，注释掉上面三行，使用下面两行，可以看到对照差别。
    //var  markers = markersA.concat(markersB,markersC);
    // var markerClusterer = new BMapLib.MarkerClusterer(map, {markers:markers});
    </script>
</body>
</html>